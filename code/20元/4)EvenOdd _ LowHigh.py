import numpy as np
import pandas as pd
from random import seed
from random import random
import matplotlib.pyplot as plt
P = np.array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
#[0.289, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0, 0.236],
#[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.289, 0, 0.474, 0.236],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1]])
state=np.array([[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]])
stateHist=state
dfStateHist=pd.DataFrame(state)
distr_hist = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
for x in range(20):
  state=np.dot(state,P)
  #print(state)
  stateHist=np.append(stateHist,state,axis=0)
  dfDistrHist = pd.DataFrame(stateHist)
  #dfDistrHist.plot()
p=P
tb = np.array(p)
b = np.array([
        [    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    1,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0],])
tb = p.dot(p)
tb = tb.dot(tb)
tb = tb.dot(p)
tb = tb.dot(tb)
tb = tb.dot(tb)
tb = b.dot(tb)
c = 0
print("odd&black")
for index in range(len(tb[0])):
    c += index * tb[0][index]
    #print(tb[0][index])
print("E(x) :\n     ",c)
print("figure(odd&black)")
xlabel = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]
plt.bar(xlabel, tb[0])
plt.show()


"""
mat=np.asarray(P)
m=(mat)
eigenvalues = np.linalg.eigvals(m)
print ("eigenvalues\n",eigenvalues)
"""
"""
__index=[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]
final=stateHist[20]
print ("final\n",final)

plt.bar(__index,final)
plt . title ( "Even/Odd & Low/High\nRed/Black & Low/High" ) 
plt.show()

e=0
for i in range(0,21):
    e += __index[i]*final[i]
    #print(tb[0][index])
print("E(x) :\n",e)#e=6.570659599314217
"""